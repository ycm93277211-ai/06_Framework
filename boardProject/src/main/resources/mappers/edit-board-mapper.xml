<?xml version="1.0" encoding="UTF-8"?>
	<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
	<mapper namespace="edu.kh.project.board.model.mapper.EditBoardMapper">
	
	<!-- 
		useGeneratedKeys 속성 : 
			DB 내부적으로 생성한 키(시퀀스)를
			전달된 파라미터의 필드로 대입 가능 여부 지정
	
		selectKey : 태그
	 -->
	 
	 
	 <insert id="boardInsert" useGeneratedKeys="true" parameterType="Board">
	 	
	 	<selectKey keyProperty="boardNo" order="BEFORE" resultType="_int">
	 		SELECT SEQ_BOARD_NO.NEXTVAL FROM DUAL
	 	</selectKey>
	 	
	 	INSERT INTO "BOARD"
	 	VALUES(#{boardNo},
	 			#{boardTitle},	
	 			#{boardContent},
	 			DEFAULT,DEFAULT,DEFAULT,DEFAULT,
	 			#{boardCode},
	 			#{memberNo}
	 				)
	 </insert>
	 
	 
	 <!-- 
 		동적 SQL 중 <foreach>
 		- Mybatis에서 제공하는 향상된 for문
 		
 		- 특정 SQL 구문을 반복할 때 사용
 		
 		- 반복 사이에 구분자(separator)를 추가할 수 있음
 		
 		[지원하는 속성]
 		collection : 반복할 객체의 타입 작성(list, set, map...)
		item : collection에서 순차적으로 꺼낸 하나의 요소를 저장하는 변수
		index : 현재 반복 접근중인 인덱스 (0,1,2,3,4 ..)
		
		open : 반복 전에 출력할 sql
		close : 반복 종료 후에 출력한 sql
		
		separator : 반복 사이사이 구분자
 	-->
	 
	 <insert id="insertUploadList" parameterType="list">
	 	INSERT INTO "BOARD_IMG"
	 		
	 		<foreach collection="list" item="img" open="(" close=")" separator=" UNION ">
	 			SELECT NEXT_IMG_NO(),
	 			 #{img.imgPath},
	 			 #{img.imgOriginalName},
	 		     #{img.imgRename},
				 #{img.imgOrder},
				 #{img.boardNo}
				 FROM DUAL
	 		</foreach>
	 	
	 </insert>
	 
	 
	</mapper>
